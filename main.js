const themeToggle=document.getElementById("theme-toggle"),body=document.body,currentTheme=localStorage.getItem("theme")||"light";body.setAttribute("data-theme",currentTheme),themeToggle.checked="dark"===currentTheme,themeToggle.addEventListener("change",(()=>{const e=themeToggle.checked?"dark":"light";body.setAttribute("data-theme",e),localStorage.setItem("theme",e)}));const mobileMenuToggle=document.querySelector(".mobile-menu-toggle"),navLinks=document.querySelector(".nav-links");mobileMenuToggle.addEventListener("click",(()=>{navLinks.classList.toggle("active")})),document.querySelectorAll(".nav-links a").forEach((e=>{e.addEventListener("click",(()=>{navLinks.classList.remove("active")}))})),document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})}))}));const contactForm=document.getElementById("contactForm");contactForm.addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("email").value,o=document.getElementById("message").value,n=`mailto:contact.dilansalinda@gmail.com?subject=Contact | Dilan Salinda&body=${encodeURIComponent(o)}%0A%0AFrom: ${encodeURIComponent(t)}`;window.location.href=n,alert("Opening your email client..."),contactForm.reset()})),window.addEventListener("scroll",(()=>{let e="";document.querySelectorAll("section").forEach((t=>{const o=t.offsetTop;t.clientHeight;scrollY>=o-100&&(e=t.getAttribute("id"))})),document.querySelectorAll(".nav-links a").forEach((t=>{t.classList.remove("active"),t.getAttribute("href")===`#${e}`&&t.classList.add("active")}))})),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/service-worker.js").then((e=>console.log("✅ Service Worker registered:",e.scope))).catch((e=>console.log("❌ Service Worker error:",e)))}));